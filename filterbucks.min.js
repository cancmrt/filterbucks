function filterbucksEngine(e){var t=[],r=e.data;"button"!=r.type&&"a"!=r.type||(jQuery(this).is("["+r.buttonCheckSelector+"]")?(jQuery(this).removeAttr(r.buttonCheckSelector),jQuery(this).css("opacity","1")):(jQuery(this).attr(r.buttonCheckSelector,""),jQuery(this).css("opacity","0.5"))),jQuery(r.parents).each(function(e){if("select"==r.type)$(this).find(r.checkSelector).length>0&&t.push(parseInt(jQuery(this).data(r.dataDeepProp),10));else if("radio"==r.type||"checkbox"==r.type||"button"==r.type||"a"==r.type){$(this).filter(r.checkSelector).length>0&&t.push(parseInt(jQuery(this).data(r.dataDeepProp),10))}});var a=t.filter(function(e,t,r){return t===r.indexOf(e)});a=a.sort(function(e,t){return e-t});var c=[];a.forEach(e=>{var a=null;if("select"==r.type)a=jQuery(r.parents).filter("[data-"+r.dataDeepProp+"='"+e+"']").find(r.checkSelector);else if("radio"==r.type||"checkbox"==r.type||"button"==r.type||"a"==r.type)a=jQuery(r.parents).filter(r.checkSelector).filter("[data-"+r.dataDeepProp+"='"+e+"']");jQuery(null!==a&&jQuery(t).length>0),c.push(a)});var s=deepQueryCreator(r,c),u="";null===s?u=r.baseClass:s.length<=0?u=r.baseClass:null!==s&&s.length>0&&(s.forEach(e=>{u+=r.baseClass+e+","}),u=u.substring(0,u.length-1)),jQuery(r.baseClass).css("display","none"),jQuery(u).css("display","")}function deepQueryCreator(e,t,r=null){if(0===t.length)return r;null===r&&(r=[]);var a=t.slice(),c=a.shift(),s=[],u=jQuery(c).filter("[data-"+e.dataFlushProp+"='true']");return jQuery(u).length<=0?jQuery(c).each(function(e){var t=this;if(0==r.length){var a="."+jQuery(t).attr("value");s.push(a)}else r.length>0&&r.forEach(e=>{var r=e+("."+jQuery(t).attr("value"));s.push(r)})}):jQuery(u).length>0&&(s=r),deepQueryCreator(e,a,s)}jQuery.fn.filterbucks=function(){var e={parents:this,baseClass:".filterbucks",dataDeepProp:"fbdeep",dataFlushProp:"fbflush",checkSelector:":checked",buttonCheckSelector:"clicked",event:"change",type:"INPUT"==jQuery(this)[0].tagName?jQuery(this)[0].type.toLowerCase():jQuery(this)[0].tagName.toLowerCase()};this.filterbucksRunner(e)},jQuery.fn.filterbucksRunner=function(e){"button"!==e.type&&"a"!==e.type||(e.event="click",e.checkSelector="[clicked]"),"select"===e.type&&(e.checkSelector="option:selected"),"radio"!==e.type&&"checkbox"!==e.type||(e.checkSelector=":checked"),this.on(e.event,e,filterbucksEngine)};