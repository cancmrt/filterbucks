function filterbucksEngine(e){var t=[],r=e.data;"button"!=r.type&&"a"!=r.type||(jQuery(this).is("["+r.buttonCheckSelector+"]")?(jQuery(this).removeAttr(r.buttonCheckSelector),jQuery(this).css("opacity","1")):(jQuery(this).attr(r.buttonCheckSelector,""),jQuery(this).css("opacity","0.5"))),jQuery(r.parents).each(function(e){if("select"==r.type)$(this).find(r.checkSelector).length>0&&t.push(parseInt(jQuery(this).data(r.dataDeepProp),10));else if("radio"==r.type||"checkbox"==r.type||"button"==r.type||"a"==r.type){$(this).filter(r.checkSelector).length>0&&t.push(parseInt(jQuery(this).data(r.dataDeepProp),10))}});var a=t.filter(function(e,t,r){return t===r.indexOf(e)});a=a.sort(function(e,t){return e-t});var u=[];a.forEach(e=>{var a=null;if("select"==r.type)a=jQuery(r.parents).filter("[data-"+r.dataDeepProp+"='"+e+"']").find(r.checkSelector);else if("radio"==r.type||"checkbox"==r.type||"button"==r.type||"a"==r.type)a=jQuery(r.parents).filter(r.checkSelector).filter("[data-"+r.dataDeepProp+"='"+e+"']");jQuery(null!==a&&jQuery(t).length>0),u.push(a)});var s=deepQueryCreator(r,u);r.extraConfiguration&&r.extraConfiguration.HideUnrelateds&&!0===r.extraConfiguration.HideUnrelateds&&filterHider(r,u,this,a,s);var i=possibleQueryGenerator(r,s);jQuery(r.baseClass).css("display","none"),jQuery(i).css("display","")}function possibleQueryGenerator(e,t){var r="";return null===t?r=e.baseClass:t.length<=0?r=e.baseClass:null!==t&&t.length>0&&(t.forEach(t=>{r+=e.baseClass+t+","}),r=r.substring(0,r.length-1)),r}function filterHider(e,t,r,a,u){var s=parseInt(jQuery(r).data(e.dataDeepProp),10);if(s!=t.length){var i=s+1;if("select"==e.type){var n=jQuery(e.parents).filter("[data-"+e.dataDeepProp+"='"+i+"']");jQuery(n).find("option").each(function(){jQuery(this).show()});var o=jQuery(r).find(e.checkSelector);jQuery(o).attr("data-"+e.dataFlushProp)&&"true"===jQuery(o).attr("data-"+e.dataFlushProp)||jQuery(n).find("option").each(function(){if(!jQuery(this).attr("data-"+e.dataFlushProp)||"true"!==jQuery(this).attr("data-"+e.dataFlushProp)){var t=jQuery(this).val(),r=!1;u.forEach(a=>{investgatorClass=e.baseClass+a+"."+t,jQuery(investgatorClass).length>0&&(r=!0)}),r||jQuery(this).hide(),r=!1}})}else if("radio"==e.type||"checkbox"==e.type||"button"==e.type||"a"==e.type){n=jQuery(e.parents).filter("[data-"+e.dataDeepProp+"='"+i+"']");jQuery(n).each(function(){jQuery(this).show()});"radio"!=e.type&&"checkbox"!=e.type||(o=jQuery(r)),"button"!=e.type&&"a"!=e.type||(o=jQuery(e.parents).filter(e.checkSelector).filter("[data-"+e.dataDeepProp+"='"+s+"']")),jQuery(o).attr("data-"+e.dataFlushProp)&&"true"===jQuery(o).attr("data-"+e.dataFlushProp)||jQuery(n).each(function(){if(!jQuery(this).attr("data-"+e.dataFlushProp)||"true"!==jQuery(this).attr("data-"+e.dataFlushProp)){var t=void 0;t="a"===e.type?jQuery(this).attr("value"):jQuery(this).val();var r=!1;u.forEach(a=>{investgatorClass=e.baseClass+a+"."+t,jQuery(investgatorClass).length>0&&(r=!0)}),r||jQuery(this).hide(),r=!1}})}}return 0==s&&a.forEach(t=>{if("select"==e.type){var r=jQuery(e.parents).filter("[data-"+e.dataDeepProp+"='"+t+"']");jQuery(r).find("option").each(function(){jQuery(this).show()})}else if("radio"==e.type||"checkbox"==e.type||"button"==e.type||"a"==e.type){r=jQuery(e.parents).filter("[data-"+e.dataDeepProp+"='"+t+"']");jQuery(r).each(function(){jQuery(this).show()})}}),[]}function deepQueryCreator(e,t,r=null){if(0===t.length)return r;null===r&&(r=[]);var a=t.slice(),u=a.shift(),s=[],i=jQuery(u).filter("[data-"+e.dataFlushProp+"='true']");return jQuery(i).length<=0?jQuery(u).each(function(e){var t=this;if(0==r.length){var a="."+jQuery(t).attr("value");s.push(a)}else r.length>0&&r.forEach(e=>{var r=e+("."+jQuery(t).attr("value"));s.push(r)})}):jQuery(i).length>0&&(s=r),deepQueryCreator(e,a,s)}jQuery.fn.filterbucks=function(e){var t={parents:this,baseClass:".filterbucks",dataDeepProp:"fbdeep",dataFlushProp:"fbflush",checkSelector:":checked",buttonCheckSelector:"clicked",event:"change",type:"INPUT"==jQuery(this)[0].tagName?jQuery(this)[0].type.toLowerCase():jQuery(this)[0].tagName.toLowerCase(),extraConfiguration:e};this.filterbucksRunner(t)},jQuery.fn.filterbucksRunner=function(e){"button"!==e.type&&"a"!==e.type||(e.event="click",e.checkSelector="[clicked]"),"select"===e.type&&(e.checkSelector="option:selected"),"radio"!==e.type&&"checkbox"!==e.type||(e.checkSelector=":checked"),this.on(e.event,e,filterbucksEngine)};